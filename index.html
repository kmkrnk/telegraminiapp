<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Telegram Mini App</title>
</head>
<body>
<h1>Все данные Telegram</h1>
<pre id="output">Загрузка данных...</pre>
<button id="sendBtn">Отправить данные обратно в бот</button>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
const tg = window.Telegram.WebApp;

if (!tg) {
    document.getElementById('output').textContent = "Откройте миниапп внутри Telegram!";
} else {
    tg.ready();

    // Распарсим initDataUnsafe (это безопасно, Telegram его сам подписал)
    const info = tg.initDataUnsafe || {};
    
    // Можно отдельно user, chat, peer, и другие поля
    const fullInfo = {
        user: info.user || null,
        receiver: info.receiver || null,
        chat: info.chat || null,
        queryId: info.query_id || null,
        authDate: info.auth_date || null,
        platform: tg.platform,
        version: tg.version,
        themeParams: tg.themeParams
    };

    // Выводим красиво
    document.getElementById('output').textContent = JSON.stringify(fullInfo, null, 4);

    // Кнопка отправки обратно в бот
    document.getElementById('sendBtn').addEventListener('click', () => {
        tg.sendData(JSON.stringify(fullInfo));
    });
}
</script>
</body>
</html>
